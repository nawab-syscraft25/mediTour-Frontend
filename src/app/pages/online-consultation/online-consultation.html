<section class="inner-banner">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">
                <div class="inner-baner-dtl position-relative text-center">
                    <img [src]="'assets/images/our-doctors.png'" class="w-100 img-fluid rounded-5" />
                    <div class="inner-heading">
                        <h2>Online Consultation</h2>
                        <ul class="breadcumb d-flex justify-content-center align-items-center gap-3">
                            <li><a href="/">Home</a></li>
                            <li><img [src]="'assets/images/breadcumb.svg'"></li>
                            <li><a href="/">Online Consultation</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="card-list-main ptc-80">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-9">
                <div class="main-head text-center mbc-50">
                    <h2>Medical Procedure</h2>
                    <p>Get expert guidance from the comfort of your home. Our online consultation service helps you understand medical procedures in detail—what they involve, the preparation required, recovery expectations, and possible alternatives. Whether you are exploring treatment options, seeking a second opinion, or preparing for surgery, we provide clear, reliable, and personalized information to support your healthcare decisions.</p>
                </div>
            </div>
        </div>

        <div *ngIf="loading" class="text-center">Loading doctors...</div>

        <div class="row" *ngIf="!loading && doctors.length">
            <div *ngFor="let d of doctors" class="col-lg-4 col-md-6 mb-4">
                <div class="user-card">
                    <div class="user-card-img">
                        <img *ngIf="d.profile_photo?.length" [src]="'http://165.22.223.163:8000' + d.profile_photo"
                            [alt]="d.name" class="card-img-top img-fluid" />
                    </div>
                    <div class="user-card-content doctors-card-info">
                        <h5 class="card-title">{{ d.name }}</h5>
                        <div class="user-card-description">
                            <p class="card-text truncate-2">{{ d.short_description }}</p>
                        </div>

                        <div class="user-card-rating">
                            <div class="user-card-rating d-flex align-items-center">
                                <ng-container *ngFor="let star of getStars(d.rating)">
                                    <!-- Full star -->
                                    <i *ngIf="star === 'full'" class="fa fa-star text-warning"></i>
                                    <!-- Half star -->
                                    <i *ngIf="star === 'half'" class="fa fa-star-half-alt text-warning"></i>
                                    <!-- Empty star with border -->
                                    <i *ngIf="star === 'empty'" class="fa-regular fa-star text-warning"></i>
                                </ng-container>
                                <span class="ms-2" *ngIf="d.rating !== null"></span>
                            </div>
                        </div>

                        <div class="d-flex align-items-center card-location">
                            <img [src]="'assets/images/d-designation.svg'">
                            <p class="mb-0">{{ d.designation }}</p>
                        </div>
                        <div class="d-flex align-items-center card-location">
                            <img [src]="'assets/images/fees.svg'">
                            <p class="mb-0">Consultation Fees: <span class="fee-amount">₹{{ d.consultancy_fee | number }}</span></p>
                        </div>
                        <div class="d-flex align-items-center card-location">
                            <img [src]="'assets/images/d-experience.svg'">
                            <p class="mb-0"> {{ d.experience_years || 'N/A' }} Years of Experience</p>
                        </div>
                        <div class="d-flex align-items-center card-location" *ngIf="d.hospitalName">
                            <img [src]="'assets/images/hospital.svg'">
                            <p class="mb-0">{{ d.hospitalName }}</p>
                        </div>

                        <!-- Add Book Consultation Button -->
                        <div class="book-package mt-3">
                            <button (click)="openModal(d)" class="btn-default">
                                Book Consultation <i class="fa-solid fa-arrow-up"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div *ngIf="!loading && !doctors.length" class="text-center">
            No doctors found.
        </div> 
    </div>

    <!-- Modal Component -->
    <app-modal [title]="'Book Consultation'" [show]="showModal" (close)="closeModal()">
        <div class="book-package-form">
            <form>
                <div class="mb-3">
                    <input type="text" class="form-control" placeholder="First Name">
                </div>
                <div class="mb-3">
                    <input type="text" class="form-control" placeholder="Last Name">
                </div>
                <div class="mb-3">
                    <input type="email" class="form-control" placeholder="Enter Email Id">
                </div>
                <div class="mb-3">
                    <input type="number" class="form-control" placeholder="Enter Mobile Number">
                </div>
                <div class="mb-3">
                    <select class="form-select" aria-label="Default select example">
                        <option selected>Select Service</option>
                        <option value="1">Online Consultation</option>
                        <option value="2">In-Person Consultation</option>
                        <option value="3">Emergency Consultation</option>
                    </select>
                </div>
                <div class="mb-3">
                    <select class="form-select" aria-label="Default select example">
                        <option selected>Select Slot</option>
                        <option value="1">Below ₹1000</option>
                        <option value="2">₹1000 - ₹5000</option>
                        <option value="3">Above ₹5000</option>
                    </select>
                </div>
                <div class="mb-3">
                    <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"
                        placeholder="Enter Your Query"></textarea>
                </div>
            </form>
        </div>
    </app-modal> 
</section>